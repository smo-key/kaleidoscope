<link rel="import" href="../lib/polymer/polymer.html">
<link rel="import" href="../lib/paper-styles/color.html">
<link rel="import" href="../lib/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../lib/paper-input/paper-input.html">
<link rel="import" href="../lib/paper-button/paper-button.html">
<link rel="import" href="../lib/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../lib/paper-progress/paper-progress.html">
<link rel="import" href="../lib/paper-listbox/paper-listbox.html">
<link rel="import" href="../lib/paper-item/paper-item.html">
<link rel="import" href="../lib/iron-icon/iron-icon.html">

<link rel="import" href="mdi.html">
<link rel="import" href="concept-search.html">
<link rel="import" href="article-list.html">

<dom-module id="app-index">
  <template>
    <style is="custom-style">
      /** BASE **/
      :host {
        display: block;
        margin: 0;
        padding: 0;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--paper-grey-50);
        color: #fff;
        font-family: 'Roboto', 'Noto', sans-serif;
      }
      h1, h2, h3, h4, h5
      {
        font-weight: 300;
      }

      /** CONTAINERS **/
      div.bottom
      {
        position: absolute;
        bottom: 0;
        bottom: 12px;
        left: 0;
        right: 0;
        color: rgba(255, 255, 255, 0.6);
        display: flex;
        justify-content: center;
        box-sizing: border-box;
        align-items: flex-end;
      }
    </style>

    <concept-search id="concept-search" page="{{page}}" hidden$="{{!pages.conceptSearch}}" search="{{search}}" search-uri="{{searchUri}}"></concept-search>
    <article-list id="article-list" page="{{page}}" hidden$="{{!pages.articleList}}" search="{{search}}" search-uri="{{searchUri}}"></article-list>
  </template>

  <script src="/lib/jquery/dist/jquery.min.js"></script>
  <script src="/lib/bootstrap/dist/js/bootstrap.min.js"></script>
  <script>
    Polymer({
      is: 'app-index',
      properties: {
        page: {
          type: Object,
          notify: true,
          observer: "pageChanged"
        },
        pages: {
          type: Object,
          notify: true,
          value: { conceptSearch: false, articleList: false }
        },
        search: {
          type: String
        },
        searchUri: {
          type: String
        }
      },
      ready: function() {
        this.set("page", "conceptSearch");
      },
      pageChanged: function(newPage) {
        var pages = this.pages;
        for (var key in this.pages) {
          if( this.pages.hasOwnProperty(key) ) {
            this.set("pages." + key, (key == newPage));
          }
        }
        //this.set("pages", {conceptSearch: true, articleList: false});
      }
    });
  </script>
</dom-module>
